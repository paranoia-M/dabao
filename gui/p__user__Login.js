(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(C){C.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",prefixIcon:"prefixIcon___23Xrx",icon:"icon___rzGKO",button:"button___37Kek","button-float":"button-float___3grhP",input:"input___ySYgL","input-light":"input-light___3pz48",card:"card___2RLLn","card-gradient":"card-gradient___29Hx7",table:"table___N5yiI","table-hover":"table-hover___CuT56","round-border":"round-border___2yPEE","background-overlay":"background-overlay___y7K6H"}},67590:function(C,E,t){"use strict";t.r(E),t.d(E,{default:function(){return J}});var _=t(18106),y=t(63885),f=t(39428),S=t(3182),F=t(2824),ee=t(17462),O=t(76772),M=t(63804),K=t(70469),v=t(5966),$=t(63434),B=t(89366),I=t(2603),m=t(25377),b={primary:"#2C7A7B",secondary:"#38B2AC",background:"#F0FFF4",accent:"#81E6D9",textPrimary:"#2D3748",textSecondary:"#718096",danger:"#F56565",success:"#48BB78",info:"#4299E1",border:"#CBD5E0",gradients:["linear-gradient(90deg, #2C7A7B 0%, #38B2AC 100%)","linear-gradient(90deg, #81E6D9 0%, #F0FFF4 100%)"]},re=t(34792),Z=t(48086),L=t(11849),V=function(){var s=(0,S.Z)((0,f.Z)().mark(function e(a,i){var d,c;return(0,f.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a==null||(d=a.fetchUserInfo)===null||d===void 0?void 0:d.call(a);case 2:c=n.sent,c&&i(function(h){return(0,L.Z)((0,L.Z)({},h),{},{currentUser:c})});case 4:case"end":return n.stop()}},e)}));return function(a,i){return s.apply(this,arguments)}}(),Y=function(){var s=(0,S.Z)((0,f.Z)().mark(function e(a,i,d,c,l){var n;return(0,f.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,n={status:"ok",type:"account",currentAuthority:"admin"},n.status!=="ok"){o.next=6;break}return Z.ZP.success(l.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"})),localStorage.setItem("user_token","your_token"),o.abrupt("return",!0);case 6:return d(n),Z.ZP.error(l.formatMessage({id:"pages.login.accountLogin.error",defaultMessage:"\u60A8\u5DF2\u7ECF\u8FDE\u7EED\u4E09\u6B21\u8F93\u5165\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u572810\u79D2\u949F\u540E\u91CD\u65B0\u5C1D\u8BD5"})),c(function(x){return x+1}),o.abrupt("return",!1);case 12:return o.prev=12,o.t0=o.catch(0),Z.ZP.error(l.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"})),o.abrupt("return",!1);case 16:case"end":return o.stop()}},e,null,[[0,12]])}));return function(a,i,d,c,l){return s.apply(this,arguments)}}(),ae=function(e){var a=["admin","manager"];return a.includes(e)},te=function(e){e&&localStorage.setItem("user_info",JSON.stringify(e))},ne=function(){var e=localStorage.getItem("user_info");return e?JSON.parse(e):null},se=function(){localStorage.removeItem("user_info"),localStorage.removeItem("user_token")},oe=function(e,a){var i=_toConsumableArray(e);return a.length>5&&i.push({validator:function(c,l){return l?Promise.resolve():Promise.reject("\u8F93\u5165\u503C\u4E0D\u7B26\u5408\u6761\u4EF6")}}),i},ue=function(e){return new Promise(function(a){return setTimeout(a,e)})},ie=function(){var e=localStorage.getItem("user_token");if(!e)return!0;var a=localStorage.getItem("token_expiration");return a?Date.now()>a:!1},le=function(e){var a=Date.now()+e;localStorage.setItem("token_expiration",a)},G=t(34687),p=t.n(G),r=t(85893),P=function(e){var a=e.content;return(0,r.jsx)(O.Z,{style:{marginBottom:24,backgroundColor:b.danger,color:"#fff"},message:a,type:"error",showIcon:!0})},H=function(){var e=(0,M.useState)({}),a=(0,F.Z)(e,2),i=a[0],d=a[1],c=(0,M.useState)("account"),l=(0,F.Z)(c,2),n=l[0],h=l[1],o=(0,M.useState)(0),x=(0,F.Z)(o,2),ge=x[0],X=x[1],U=(0,m.tT)("@@initialState"),w=U.initialState,Q=U.setInitialState,u=(0,m.YB)(),W=function(){var q=(0,S.Z)((0,f.Z)().mark(function T(k){var j,R,N,z;return(0,f.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Y(k,n,d,X,u);case 2:if(j=g.sent,console.log("loginResponse",j),!j){g.next=8;break}return g.next=7,V(w,Q);case 7:m.m8.push("/");case 8:if(m.m8){g.next=10;break}return g.abrupt("return");case 10:return R=m.m8.location.query,N=R,z=N.redirect,m.m8.push(z||"/"),g.abrupt("return");case 14:case"end":return g.stop()}},T)}));return function(k){return q.apply(this,arguments)}}(),D=i.status,A=i.type;return(0,r.jsx)("div",{className:p().container,style:{backgroundColor:b.background},children:(0,r.jsx)("div",{className:p().content,children:(0,r.jsxs)(K.U,{title:"\u57FA\u4E8E\u4E92\u8054\u7F51\u7684\u4FE1\u606F\u6280\u672F\u7EFC\u5408\u7BA1\u63A7\u7CFB\u7EDF",initialValues:{autoLogin:!0},onFinish:W,children:[(0,r.jsxs)(y.Z,{activeKey:n,onChange:h,style:{marginBottom:24},children:[(0,r.jsx)(y.Z.TabPane,{tab:u.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,r.jsx)(y.Z.TabPane,{tab:u.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"phone")]}),D==="error"&&A==="account"&&(0,r.jsx)(P,{content:"\u60A8\u5DF2\u7ECF\u8FDE\u7EED\u4E09\u6B21\u8F93\u5165\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u572810\u79D2\u949F\u540E\u91CD\u65B0\u5C1D\u8BD5"}),D==="error"&&A==="phone"&&(0,r.jsx)(P,{content:"\u624B\u673A\u53F7\u6216\u9A8C\u8BC1\u7801\u9519\u8BEF"}),n==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(B.Z,{className:p().prefixIcon})},placeholder:u.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:u.formatMessage({id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01"})}]}),(0,r.jsx)(v.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(I.Z,{className:p().prefixIcon})},placeholder:u.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:u.formatMessage({id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),n==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{name:"phone",fieldProps:{size:"large",prefix:(0,r.jsx)(B.Z,{className:p().prefixIcon})},placeholder:u.formatMessage({id:"pages.login.phone.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:u.formatMessage({id:"pages.login.phone.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})}]}),(0,r.jsx)(v.Z,{name:"code",fieldProps:{size:"large",prefix:(0,r.jsx)(I.Z,{className:p().prefixIcon})},placeholder:u.formatMessage({id:"pages.login.code.placeholder",defaultMessage:"\u9A8C\u8BC1\u7801"}),rules:[{required:!0,message:u.formatMessage({id:"pages.login.code.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}]})]}),(0,r.jsx)("div",{style:{marginBottom:24},children:(0,r.jsx)($.Z,{name:"autoLogin",children:u.formatMessage({id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})})})]})})})},J=H}}]);
