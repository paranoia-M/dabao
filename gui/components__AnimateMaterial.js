(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[226],{42055:function(Q,M,e){"use strict";e.r(M);var X=e(20228),c=e(11382),Y=e(71194),A=e(48889),$=e(8963),T=e(42020),k=e(57663),y=e(71577),q=e(63185),h=e(9676),w=e(9715),d=e(903),ee=e(47673),E=e(29730),C=e(86582),se=e(74379),r=e(38648),o=e(2824),_=e(11849),ae=e(43358),O=e(34041),i=e(63804),_e=e.n(i),I=e(51615),s=e(85893),S=O.Z.Option,f=[{id:"1",name:"\u7BA1\u7406\u5458"},{id:"2",name:"\u666E\u901A\u7528\u6237"}],g=[{id:"1",name:"\u67E5\u770B\u4EEA\u8868\u76D8"},{id:"2",name:"\u7F16\u8F91\u8D44\u6599"},{id:"3",name:"\u5220\u9664\u7528\u6237"}],L={userForm:{username:"",email:"",role:"",permissions:[]},auditLogs:[],isMFAVisible:!1,isSubmitting:!1,mfaCode:""},U=function(n,t){switch(t.type){case"SET_USER_FORM":return(0,_.Z)((0,_.Z)({},n),{},{userForm:t.payload});case"SET_AUDIT_LOGS":return(0,_.Z)((0,_.Z)({},n),{},{auditLogs:t.payload});case"TOGGLE_MFA":return(0,_.Z)((0,_.Z)({},n),{},{isMFAVisible:t.payload});case"SET_MFA_CODE":return(0,_.Z)((0,_.Z)({},n),{},{mfaCode:t.payload});case"SET_SUBMITTING":return(0,_.Z)((0,_.Z)({},n),{},{isSubmitting:t.payload});default:return n}},B=function(){var n=(0,i.useReducer)(U,L),t=(0,o.Z)(n,2),u=t[0],l=t[1],R=(0,i.useState)(f),D=(0,o.Z)(R,2),K=D[0],te=D[1],j=(0,i.useState)(g),P=(0,o.Z)(j,2),x=P[0],ne=P[1],W=(0,i.useState)([]),v=(0,o.Z)(W,2),p=v[0],F=v[1],b=(0,I.k6)();(0,i.useEffect)(function(){F([{user:"admin",action:"\u521B\u5EFA\u7528\u6237",time:"2025-01-04 10:00"},{user:"user1",action:"\u7F16\u8F91\u8D44\u6599",time:"2025-01-04 11:00"}])},[]);var G=function(m){l({type:"SET_SUBMITTING",payload:!0}),setTimeout(function(){r.Z.success({message:"\u7528\u6237\u4FE1\u606F\u5DF2\u66F4\u65B0"}),l({type:"SET_SUBMITTING",payload:!1}),V("\u521B\u5EFA\u7528\u6237")},2e3)},V=function(m){var J={user:"admin",action:m,time:new Date().toISOString()};l({type:"SET_AUDIT_LOGS",payload:[].concat((0,C.Z)(p),[J])})},N=function(){u.mfaCode==="123456"?(r.Z.success({message:"\u591A\u56E0\u7D20\u8BA4\u8BC1\u6210\u529F"}),l({type:"TOGGLE_MFA",payload:!1})):r.Z.error({message:"\u9A8C\u8BC1\u7801\u9519\u8BEF"})},z=function(m){l({type:"SET_MFA_CODE",payload:m.target.value})},ue=function(){r.Z.success({message:"\u767B\u5F55\u6210\u529F"}),b.push("/dashboard")},H=[{title:"\u64CD\u4F5C\u7528\u6237",dataIndex:"user",key:"user"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"action",key:"action"},{title:"\u65F6\u95F4",dataIndex:"time",key:"time"}];return(0,s.jsxs)("div",{style:{padding:"20px"},children:[(0,s.jsx)("h2",{children:"\u7528\u6237\u4E0E\u6743\u9650\u7BA1\u7406"}),(0,s.jsxs)(d.Z,{name:"user-form",onFinish:G,initialValues:u.userForm,style:{marginBottom:"20px"},children:[(0,s.jsx)(d.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)(d.Z.Item,{label:"\u90AE\u7BB1",name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}],children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)(d.Z.Item,{label:"\u89D2\u8272",name:"role",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}],children:(0,s.jsx)(O.Z,{children:K.map(function(a){return(0,s.jsx)(S,{value:a.name,children:a.name},a.id)})})}),(0,s.jsx)(d.Z.Item,{label:"\u6743\u9650",children:x.map(function(a){return(0,s.jsx)(h.Z,{value:a.id,children:a.name},a.id)})}),(0,s.jsx)(y.Z,{type:"primary",htmlType:"submit",loading:u.isSubmitting,children:"\u63D0\u4EA4"})]}),(0,s.jsx)(T.Z,{dataSource:u.auditLogs,columns:H,rowKey:"time",pagination:!1,style:{marginBottom:"20px"}}),(0,s.jsx)(A.Z,{title:"\u591A\u56E0\u7D20\u8BA4\u8BC1",visible:u.isMFAVisible,onCancel:function(){return l({type:"TOGGLE_MFA",payload:!1})},onOk:N,children:(0,s.jsx)(E.Z,{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",value:u.mfaCode,onChange:z})}),(0,s.jsx)(c.Z,{spinning:u.isSubmitting})]})};M.default=B}}]);
